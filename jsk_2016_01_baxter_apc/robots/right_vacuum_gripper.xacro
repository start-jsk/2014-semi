<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="right_vaccum_gripper">
  <xacro:include filename="$(find jsk_2016_01_baxter_apc)/robots/common_constants.xacro"/>
  <!-- Gazebo Tags -->
  <gazebo reference="right_gripper_base">
    <selfCollide>true</selfCollide>
    <material>Gazebo/White</material>
  </gazebo>
  <gazebo reference="right_gripper_vacuum_pad_base">
    <selfCollide>true</selfCollide>
    <material>Gazebo/Grey</material>
  </gazebo>
  <gazebo reference="right_gripper_vacuum_pad">
    <selfCollide>true</selfCollide>
    <material>Gazebo/Green</material>
  </gazebo>
  <gazebo reference="right_gripper_vacuum_pad_joint">
    <implicitSpringDamper>false</implicitSpringDamper>
  </gazebo>
  <!--Link bodies-->
  <xacro:property name="pad_with_base_offset_x" value="-0.048" />
  <xacro:property name="pad_with_base_offset_y" value="-0.0005" />
  <xacro:property name="pad_with_base_offset_z" value="-0.302" />
  <!--Joints-->
  <xacro:property name="hand_offset_x" value="-0.01" />
  <xacro:property name="hand_offset_z" value="0" />
  <xacro:property name="pad_joint_offset_x" value="0.048" />
  <xacro:property name="pad_joint_offset_y" value="0.0005" />
  <xacro:property name="pad_joint_offset_z" value="0.302" />
  <xacro:property name="finger_base_offset_z" value="0.291352" />
  <xacro:property name="finger_base_offset_x" value="-0.014" />
  <xacro:property name="l_finger_base_offset_y" value="0.026" />
  <xacro:property name="r_finger_base_offset_y" value="-0.026" />

  <!--Link bodies-->
  <link name="right_gripper_base">
    <visual>
      <origin rpy="${M_PI/2} 0 ${M_PI/2}" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://jsk_2016_01_baxter_apc/meshes/visual/right_gripper_base.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="lightgrey">
        <color rgba="0.5 0.5 0.5 1"/>
      </material>
    </visual>
    <!--FIXME: Add collision-->
    <!--FIXME: Adjust inertia-->
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.3"/>
      <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
    </inertial>
  </link>
  <link name="right_gripper_tube">
    <visual>
      <origin rpy="${M_PI/2} 0 ${M_PI/2}" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://jsk_2016_01_baxter_apc/meshes/visual/right_gripper_tube.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="lightgrey">
        <color rgba="0.5 0.5 0.5 1"/>
      </material>
    </visual>
    <!--FIXME: Add collision-->
    <!--FIXME: Adjust inertia-->
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.3"/>
      <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
    </inertial>
  </link>
  <link name="right_gripper_pad_with_base">
    <visual>
      <origin rpy="${M_PI/2} 0 ${M_PI/2}" xyz="${pad_with_base_offset_x} ${pad_with_base_offset_y} ${pad_with_base_offset_z}"/>
      <geometry>
        <mesh filename="package://jsk_2016_01_baxter_apc/meshes/visual/right_gripper_pad_with_base.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="lightgrey">
        <color rgba="0.5 0.5 0.5 1"/>
      </material>
    </visual>
    <!--FIXME: Add collision-->
    <!--FIXME: Adjust inertia-->
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.01"/>
      <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
    </inertial>
  </link>
  <link name="right_gripper_r_finger_base">
    <visual>
      <origin rpy="${M_PI/2} 0 ${M_PI}" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://jsk_2016_01_baxter_apc/meshes/visual/finger_base.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="lightgrey">
        <color rgba="0.5 0.5 0.5 1"/>
      </material>
    </visual>
    <!--FIXME: Add collision-->
    <!--FIXME: Adjust inertia-->
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.01"/>
      <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
    </inertial>
  </link>
  <link name="right_gripper_l_finger_base">
    <visual>
      <origin rpy="${M_PI/2} 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://jsk_2016_01_baxter_apc/meshes/visual/finger_base.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="lightgrey">
        <color rgba="0.5 0.5 0.5 1"/>
      </material>
    </visual>
    <!--FIXME: Add collision-->
    <!--FIXME: Adjust inertia-->
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.01"/>
      <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
    </inertial>
  </link>
  <link name="right_gripper_r_finger">
    <visual>
      <origin rpy="${M_PI/2} 0 ${M_PI}" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://jsk_2016_01_baxter_apc/meshes/visual/finger.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="lightgrey">
        <color rgba="0.5 0.5 0.5 1"/>
      </material>
    </visual>
    <!--FIXME: Add collision-->
    <!--FIXME: Adjust inertia-->
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.01"/>
      <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
    </inertial>
  </link>
  <link name="right_gripper_l_finger">
    <visual>
      <origin rpy="${M_PI/2} 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://jsk_2016_01_baxter_apc/meshes/visual/finger.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="lightgrey">
        <color rgba="0.5 0.5 0.5 1"/>
      </material>
    </visual>
    <!--FIXME: Add collision-->
    <!--FIXME: Adjust inertia-->
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.01"/>
      <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
    </inertial>
  </link>

  <!--Joints-->
  <joint name="right_gripper_base_fixed" type="fixed">
    <origin rpy="0 0 0" xyz="${hand_offset_x} 0 ${hand_offset_z}" />
    <parent link="right_hand"/>
    <child link="right_gripper_base"/>
  </joint>
  <joint name="right_gripper_prismatic_joint" type="prismatic">
    <origin rpy="0 0 0" xyz="0 0 0" />
    <parent link="right_gripper_base"/>
    <child link="right_gripper_tube"/>
    <axis xyz="0 0 1"/>
    <limit lower="0" upper="0.124" effort="0" velocity="0.024"/>
  </joint>
  <joint name="right_gripper_vacuum_pad_joint" type="revolute">
    <origin rpy="0 0 0" xyz="${pad_joint_offset_x} ${pad_joint_offset_y} ${pad_joint_offset_z}"/>
    <parent link="right_gripper_tube"/>
    <child link="right_gripper_pad_with_base"/>
    <axis xyz="0 1 0"/>
    <limit lower="-1.58" upper="1.58" effort="0" velocity="0.68"/>
  </joint>
  <joint name="right_gripper_finger_yaw_joint" type="revolute">
    <origin rpy="0 0 0" xyz="${finger_base_offset_x} ${l_finger_base_offset_y} ${finger_base_offset_z}"/>
    <parent link="right_gripper_base"/>
    <child link="right_gripper_l_finger_base"/>
    <axis xyz="0 0 1"/>
    <limit lower="0" upper="1.58" effort="0" velocity="0.66"/>
  </joint>
  <joint name="right_gripper_r_finger_yaw_joint" type="revolute">
    <origin rpy="0 0 0" xyz="${finger_base_offset_x} ${r_finger_base_offset_y} ${finger_base_offset_z}"/>
    <parent link="right_gripper_base"/>
    <child link="right_gripper_r_finger_base"/>
    <mimic joint="right_gripper_finger_yaw_joint" multiplier="1"/>
    <axis xyz="0 0 -1"/>
    <limit lower="0" upper="1.58" effort="0" velocity="0.66"/>
  </joint>
  <joint name="right_gripper_finger_roll_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="right_gripper_l_finger_base"/>
    <child link="right_gripper_l_finger"/>
    <axis xyz="1 0 0"/>
    <limit lower="0" upper="3.14" effort="0" velocity="1.0"/>
  </joint>
  <joint name="right_gripper_r_finger_roll_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="right_gripper_r_finger_base"/>
    <child link="right_gripper_r_finger"/>
    <mimic joint="right_gripper_finger_roll_joint" multiplier="1"/>
    <axis xyz="-1 0 0"/>
    <limit lower="0" upper="3.14" effort="0" velocity="1.0"/>
  </joint>

</robot>
